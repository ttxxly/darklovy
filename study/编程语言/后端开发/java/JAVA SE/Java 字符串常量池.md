一般在java中，字符串对象有两种创建方式。

```
1. 字面量形式
	例子：String str = "Android";
2. 使用 new 构造对象的方法
	例子：String str = new String("Android");
这两种实现存在着一些性能和内存占用的差别，
这是因为 JVM 为了减少字符串对象的重复创建，其维护了一块特殊的内存
这块内存被称为字符串常量池或者字符串字面量池。
```

#### 原理

```
当代码中出现字面量形式创建字符串对象时，JVM首先会对这个字面量进行检查，如果字符串常量池中存在相同内容的字符串对象的引用，则将这个引用返回，否则新的字符串对象将被创建，然后将这个引用放入字符串常量池，并返回引用。
```

#### 例子说明

```
1. 字面量创建形式
	String str1 = "Android";
	说明：JVM 检测这个字面量，在这里我们以为没有内容为"Android"的对象存在.
	JVM 通过字符串常量池查找不到内容为 "Android" 的字符串对象存在，那么会创建这个字符串对象，然后将刚创建的对象的引用放入到字符串常量池中，并且将引用返回给变量 str1.
	接下来我们在创建下面这样一段代码：
		String str2 = "Android";
	说明：同样JVM还是要检测这个字面量，JVM通过查找字符串常量池，发现内容为"Android"字符串对象存在，于是将已经存在的字符串对象的引用返回给变量str2。
	注意：这里不会重新创建新的字符串对象。
	
	验证str1和str2是否指向同一对象的方式：
		System.out.println(str1 == str2)
		结果为：true
2. 使用 new 创建
	String str3 = new String("Android");
	说明：当我们使用 new 来构造字符串对象的时候，不管字符串常量池中有没有相同内容的对象的引用，新的字符串对象都会创建，因此我们使用下面的代码进行测试。
	String str3 = new String("Android")；
	System.out.println(str1 == str3);
	结果为：false，表明不是同一个对象。

3. intern
	作用：
		对于使用 new 创建的字符串对象，可以使用 intern 将
		这个对象的引用加入到字符串常量池中。
	说明：
		调用 intern 后，首先检查字符串常量池中是否有该对象的引用
			如果存在，将这个引用返回给变量
			如果不存在，将引用加入字符串常量池中，并返回给变量。
	测试案例：
		String str4 = str3.intern();
		System.out.println(str4 == str1);
		结果为：true
```

#### 相关问题

```
1. 前提条件？
	字符串常量池实现的前提条件是：Java中String对象是不可变的。
	可以安全保证多个变量共享同一个对象。
2. 字符串常量池中存放的是是引用还是对象呢？
	字符串常量池存放的是对象引用，不是对象。
	在Java中，对象都创建在堆内存中。
3. 字符串常量池的优缺点？
	好处：减少相同内容字符串的创建，节省内存空间。
	缺点：牺牲了CPU计算时间来换空间。
		CPU计算时间主要用于在字符串常量池中查找是否有内容相同对象的引用。
		其内部实现为 HashTable，计算成本相对还是比较低的。
4. GC 回收？
	或许 大概 不知道
5. 下面的代码会创建几个字符串对象，在字符串常量池中保存几个引用？
	String test = "a" + "b" + "c";
	答：只创建了一个对象，在常量池中也保存一个引用。
```

