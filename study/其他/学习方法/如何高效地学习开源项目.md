得益于开源运动的蓬勃发展，众多技术顶尖的公司、团队或者个人通过开源的方式向技术社区贡献了许多优秀的开源项目，一方面大大滴促进了整体技术的发展，另一方面大大减轻了中小公司和团队在技术方面的投入压力，让团队能够更加聚焦于业务。

开源项目对团队和业务有很大好处，但对于技术人员来说，如果只是简单的采取“拿来主义”，那就变成一个陷阱：看似很快的用开源项目实现了需求，但自己的技术水平并没有什么提升，甚至可能出现看起来用了很多的开源项目，知道很多项目名称，但技术水平止步于前的窘境。

因此，对于开源项目，不能简单的采取“拿来主义”，而要比较深入的去学习开源项目，做到“知其然，知其所以然”，一方面是为了更好地应用这些开源项目，另一个方面是为了通过学习优秀的开源项目来提升自己的能力。

很多技术同学确实也想深入学习一些业界成熟和优秀的开源项目，例如Nginx、Redis、Netty等，但是在具体实践时，常常因为一些不正确的观点而误入歧途。例如：

* 只有开发这些开源项目的人才能真正理解，我没法参与这个项目的开发，因此我很难深入理解。
* 我的项目没有用Redis，不用的话很难深入理解。
* 数据结构和算法很重要，所以我只要研究其数据结构和算法就够了，例如 Nginx 用的红黑树。
* “Talk is a sheep, show me the code.”，一头扎进源码逐行阅读。

这些观点要么让自己望而生畏从而轻易放弃，要么让自己浪费大量时间而没有多大收获，那究竟要怎样做才是正确的呢？下面我结合自己的经脸谈谈我对如何学习开源项目的看法。

* 首先，需要树立正确的观念：不管你是什么身份，都可以从开源项目中学到很多东西。

例如，要理解`Redis`的网络模型，我们不需要成为`Redis`的开发者，也不需要一定要用到`Redis`,只要具备一定的网络编程基础，再通过阅读`Redis`的源码，都可以学习`Redis`这种单进程的Reactor模型。

* 其次，不要只盯着数据结构和算法，事实上这两点在学习开源项目的时候并没有那么重要。

例如，`Nginx` 使用红黑树来管理定时器，对于绝大部分人来说，只要知道这点就够了，并不需要去研究`Nginx`实现红黑树的源码是如何写的，除非你需要修改这部分，但我认为极少人会有这个需求。

* 第三，采取"自顶向下"的学习方法，源码不是第一步，而是最后一步。

不要一上来就去看源码，而是要基本掌握了功能、原理、关键设计之后再去看源码，看源码的主要目的是为了学习其代码的写作方法以及关键技术的实现。

0!isp, Redi

父子进程机制以及copy-on-write技术相关了 •

aaa种放，
接下来_细谈谈

第卡錄

很多人看到"安装"

涵觀系统121 十的规商_is的RDB獻），又能够掌顧体的離技巧（内存快照)
启顶向下"的学习方法和步骤，

獅能会觉得有点不以为然："不就是对照手册撕

没什么技术含畺，用的时候fFm可以了'

安装步止这么商单，通过興体的安装过程，你可以获取到如下一s关键倍息:

以Nginx为例，源码安装Nginx依敵的库有pcre、pcre-devel、openssl、openssl-devel、zlib,光从名宇上看都能够了解一^倍息，例如openssl可能和https有关，zlib可齡□压缩有关。
再以Memcache为例，最大的依賴就是libevent,而根据libevent是一•高性能的网塔库，我们就能大概推测Memcache的网络实现应该是Reactor模型的。

•魏目录也用和运碰齡信息
例如，Nginx安装完成后，目录如下：

这个目的倍息有：conf是存放E«S；件的，logs是存放曰志的，sbin
再来看看Redis,安装完成后，目录下只有一t bin目录，具体如下：

腿html是什么呢？这个疑问#使你继续去研娜学习,

我相倍大部分人看到这目录都会感到有点惊讶：这也太简单了吧，尤其是与Nginx相比！因此也会自然而然的有一S疑问，例如Redis如何配置？ Redis臼志保存在哪J
•系_供了哪些工旲方便我们使用

I■到 redis-benchmark、

3疑问同样会促使你f

i景可能非常方便.

?看问题i

【是最高的<

第二步：运行

安后，我们i

例如，下面SMemcache的启动参数一gp分:

i行机制和原理的_扇窗口,

通过这几个肩动参数，你可以获取如下一S信息：

•	Memcache 支持 UNIX socket 通倍和 TCP 通信。

•	Memcache可以指走内存大小。

• lock memory	来和内存有关，但旲体是什么意-1

随和^13■有什么区别么？

通常情况下.

有什么变化。例如，将Memcache的

驅]

-conn-limit"改为 1 后,

5_清楚了的话，

晴多个连接请求吋Memecache会返回什么離、记新么日志等.

规所有的配置]

mm)

作用、影响,



第三步：MS研究

完成前两个步腰后，我们对系统^有了初步的感觉和理解,
t要iwaan下几个方面：

但是还不系统，因此我们要专门针对原理进行系统性的硏究。这里的关键就是"系统性"

怎么才

•	的基本实_理

每个流行的开源项目之所以能够受到大众的欢迎,
例如，

m,

雅是有一s卖点的，常见的有高性能'高可用' 可矿展等特性，那到底这些项目是如何做到其所宣称的那么牛的呢？这些牛X的技术实现就；!
菌先是基于libevent实现了高性能的网络模型，其次是内Slab Allocator机制。为了彻Memcache的高性能网绺模型，我们S

I的网络模型，其次J
淋的项目中如何持这些东西全部串起来实现了i

i们要学习的地方。
掌握很多知识：多路J

Reactor 模型、多

Virtual DOM的实现原理是什么、为何酸现Virtual DOM' React SSP何构建Virtual DOM树、Virtual DOM与DOM什么关系S
•优網对比分析

这是我想特别强调的一点，只有清楚掌_术方案的优缺点后才算真正的掌握这门技术，也只有_了技术方案的优缺点后才能在架构设计的时候做出合理的i^。
优缺点主要通过对比来分析，即：我们将两个类似的系统进行对比，看看它们的实现差异，以及不同的实现优缺点都是什么。

典型的对fc睹Memcache和Redis,例如（仅举例说明，实际上对比的点很多），Memcache用多线程，Redis用单进程，各有什么优缺点？ Memcache和Redis的;
即使是Redis自身，我们也可以对比RDB和AOF两种模式的优缺点。

在你了解了什么是"系统性"后，我来介绍一下腿硏究的手段，主要有三种：

DOM,即使不使用React,

nil：

'lQI

阅读网上已有的分析文档：通常情况下tt®热门的开源项目，都已经有^常多的分析文档了，我们可以站在前人的基础上，避免大畺的重复投入。但需要i
不能完全参照。一ttl®»的方式就是多方对照，fe就是说看很多篇分析文档，tt®它们的内容；

由于经验、水平、关注虎等差异，不同的人分析的结论可能有差异，甚至有的是错误的，因此

• Demo验证：如果有些技术点难以查到辦，自己又不确定，则可以真正去写Demo进行验证，通过打印一S日志或者调试，能清晰的理解具体的细节。例如，写一f"简单的分配内存程序，然后通过日志和命令行（jmap、jstat、jstack等）来查看Java虚
拟机垃圾回收时的具体表现。

第四步：测试

通常情况下，如果你真的准备在实际项目中使用某个幵源项目的话，必须进行测试。有的同学可能会说，网上的分析和测试文档很多，直接找一篇看就可以了？如果只是自己学习和硏究，这样做是可以的，因为构建宪整的测试用例既需要耗费较多时间，又需要
较多机器资源，如果每个项目都这么做的话，投入财有点大；獅果实獅目中使用，必须自己进行臟，因为网上搜的测雖果，不一走与自己的业务场景很契合，如果简单参考剖人的测雖果，很可能練出雖的结论。例如，开源系统的版本不
同，测雖果可_雜大。同样是K-V存储，别人臟的value是128字节，而你的场景value都达到了 128k邦，两者的獅課臉异很大，不能简单照搬。

测试阶段需要特别强调的一点就是：测试一定要在原理研究之后做，不能安装完成立马就测试！原因在于如果对系统不熟悉，很可能出现命令行、配置参数没用对，或者运行槿式i^F对，导致没有根据业务的特商搭建正踊的环境、没有设计合理的测试用例，
从而使得最终的测雖果得出了错^论，误导了设计决策。曾经有团队安装完成1\/^<31_5.1后就进行性能测试，测试结果出来让人大跌眼镜，经过定位才发现丨1111〇北_|31^61^0〇1_5丨26使用的是默认值81^。

第五步：源码研究

源码研究的主要目的群习腿背后的县体编码如何实现，通过学习这些技巧雜蘭丨]自己的技术能力。例如Redis的RDB快照、Nginx的多Reactor模型、Disruptor如何使用volatile舰CAS雑无換谢十、Netty的Zero-Copy等，这勘
巧，提升自己的编码能力。

通常情况下，極议通读所有源码，因为想雜每册码的含义和作用膝非常賴时间的，MySQL' Nginx这种规模的项目，即使a他们的开发人员，都不一走每个人都掌握了所有代码。带着明确目的去研究祖做到有的放矢，才能幹功倍，这也
是源码研究要放在最后的原因。

对于基础库，除了阅读源码外，还可以自己写个Demo调用基础库宪成一些简单的功能，然后通过调试来看具体的调用栈，通过调用栈来理解基础库的处理逻辑和过程t这比单纯看代码去麵逻辑!
样例调试的職，ilfi職我们可以看到雜的调用栈：

下面是Netty 4,1版本的telnet服务器

时间分配
前面介绍的
问题，

通常情况下.
排"TFSifti

，自顶向下"S个步驟.

啲前3个網
概不去做，而是在自己；

I资源。

麵间进行学习

:白己又很难提升？面对这种两难

S五步可以根据你的时间来进行j

[的

因为只有这样才能真	学到J

如果感觉自己时间和精力不够，与其蜻艇点水每攸獅目都去简单了解一下，研如集中精力鹏目硏究as, smss特度只学习一I'jH鹏目，积累脾酿^*也a®客观的；而且一且^项目硏究透〇jj§,再去硏赌_以项目，
你会发现自己学习的非常快，因为共性的部分你已经都麵了，只需要项目差异的部分即可。

今天，繼你分享了我对于学习开源项目的看法和步骤，希望对你有所帮助。如果你在工作、学3中遇到什么问题，不论是技术、管理或者其他方面，麵在"特别放送"里給我留言，可能你的问题就是"华仔，放学别走！第4期"的主题，

»§到了送插利的时间，14~25期入选精选留言的用PS@_~t、endless、®明曰之舂、米©loveluckystar、®肖一林' @衣申人、®plflying、@IES那朵玫瑰、©LeonWong、@?d猸超、@yasonli、®gen」in, ■你们价值68元的专栏
阅码。也感谢所有留言的同学，你的想法不仅让自己加深了对问题的思考，也能帮助到其他同学一起进步。

极客时间

从〇开始学架构

——U资深技术专家的

实战架构心法

李运华 资深技术专家